# imageninja.ru

**imageninja.ru** — онлайн-сервис для оптимизации изображений (JPEG, PNG, WebP, AVIF) с возможностью выбора формата, качества и наглядным сравнением "до/после".

## Основные возможности
- Загрузка изображений через drag-and-drop
- Выбор формата (JPEG, PNG, WebP, AVIF)
- Регулировка качества
- Сравнение оригинала и оптимизированного изображения
- Скачивание результата
- Адаптивный дизайн
- Многостраничная структура под SEO-запросы (динамические страницы)

## Технологии
- Frontend: React, TypeScript, TailwindCSS, Vite, Wouter (маршрутизация), react-helmet-async (SEO)
- Backend: Node.js, Express, Sharp

## Цель
Сделать оптимизацию изображений максимально быстрой, удобной и бесплатной для всех пользователей Рунета.

## Цель проекта
Разработать веб-приложение для оптимизации изображений с сохранением качества, аналогичное TinyPNG, на основе библиотеки Sharp. Приложение должно поддерживать загрузку изображений в различных форматах и предоставлять оптимизированные версии с возможностью выбора выходных форматов.

## Общая архитектура
1. **Клиентская часть**:
   - Интерфейс для загрузки изображений.
   - Настройки выбора выходных форматов.
   - Отображение результатов оптимизации.
   - **HeroSection** — отдельный компонент для приветственного блока и преимуществ сервиса.
   - **OptimizePage** — универсальный компонент для всех SEO-страниц оптимизации.
   - **Маршрутизация** — реализована через Wouter (SPA-маршрутизация, поддержка динамических страниц по slug).
   - **SEO-мета** — реализовано через react-helmet-async, данные берутся из единого конфига страниц.
2. **Серверная часть**:
   - API для обработки изображений с использованием Sharp.
   - Хранение временных файлов.
   - Логирование операций.
3. **База данных**:
   - Хранение метаданных о загруженных изображениях (опционально).

## Основные этапы разработки
1. Проектирование архитектуры.
2. Реализация клиентского интерфейса.
3. Разработка серверного API.
4. Интеграция с библиотекой Sharp.
5. Тестирование и оптимизация.
6. Деплой и мониторинг.

## Используемые технологии
- **Frontend**: React, Vite, TailwindCSS, Wouter, react-helmet-async.
- **Backend**: Node.js, Express.
- **Обработка изображений**: Sharp.
- **База данных**: PostgreSQL (опционально).

## Критерии
- **Производительность**: Минимизация времени обработки изображений.
- **Безопасность**: Валидация входных данных, защита от перегрузки сервера.
- **Поддерживаемость**: Чистый код, модульная архитектура, документация.

## Ключевые архитектурные изменения

### Переход на FormData для пакетной загрузки архива
- Для устранения ошибки PayloadTooLargeError и повышения производительности реализован переход с передачи base64 через JSON на передачу файлов через FormData (multipart/form-data) при скачивании архива оптимизированных изображений.
- Преимущества: отсутствие лимита JSON, меньшая нагрузка на память, возможность обработки больших архивов, стандартный подход для передачи файлов.

---

*Обновляется при изменениях архитектуры или функциональных требований.* 