# QA: Вопросы по архитектуре и реализации

## Общие вопросы
1.  **Ограничения на размер/количество файлов:** Есть ли предполагаемые ограничения на максимальный размер одного загружаемого файла или общее количество файлов в одной сессии загрузки? Это повлияет на настройки сервера (например, `client_max_body_size` в Nginx) и обработку потоков данных.
2.  **Поддерживаемые форматы изображений:**
    *   Какие конкретно входные форматы изображений должны поддерживаться (JPEG, PNG, WebP, GIF, TIFF, SVG и т.д.)?
    *   Какие выходные форматы будут доступны для выбора пользователю? Будет ли формат "как у источника" опцией по умолчанию?
3.  **Стратегия обработки ошибок:** Как должны отображаться ошибки пользователю (например, при загрузке файла неподдерживаемого формата или при ошибке оптимизации на сервере)? Нужны ли специфические коды ошибок для API?

## Клиентская часть (Frontend)
1.  **Асинхронная загрузка и отображение прогресса:** Как должен быть реализован UX для загрузки нескольких файлов? Нужно ли отображать индивидуальный прогресс для каждого файла или общий?
2.  **Предварительный просмотр для всех форматов:** Будет ли требование генерировать превью для всех поддерживаемых входных форматов на клиенте перед отправкой на сервер?

## Серверная часть (Backend) & Sharp
1.  **Параметры оптимизации по умолчанию:** Какие параметры оптимизации Sharp будут использоваться по умолчанию для каждого типа изображений (например, уровень качества для JPEG, уровень сжатия для PNG)?
2.  **Пользовательские настройки оптимизации:** Если пользователь сможет выбирать выходные форматы, сможет ли он также влиять на параметры оптимизации (например, качество JPEG, сжатие PNG, lossless/lossy для WebP)? Насколько гранулярными должны быть эти настройки?
3.  **Обработка метаданных:** Нужно ли сохранять/удалять метаданные изображений (EXIF, IPTC, XMP) по умолчанию? Будет ли опция для пользователя управлять этим?
4.  **Управление временными файлами:** Каков жизненный цикл временных файлов (оригиналы и оптимизированные версии)? Как долго они должны храниться на сервере перед автоматическим удалением? Нужен ли механизм для ручной очистки?
5.  **Масштабируемость обработки:** Какие ожидания по одновременному количеству обрабатываемых изображений? Нужно ли предусматривать очередь задач или более сложную архитектуру для масштабирования обработки изображений (например, с использованием воркеров или serverless-функций)?
6.  **Безопасность API:** Кроме валидации форматов, какие еще меры безопасности следует предусмотреть для API (например, ограничение частоты запросов, защита от "зип-бомб" в случае поддержки архивов с изображениями)?

## База данных (Опционально)
1.  **Целесообразность использования БД:** Какие конкретно метаданные предполагается хранить, если БД будет использоваться? Какую пользу это принесет (например, аналитика, история загрузок пользователя, если будет аутентификация)?
2.  **Выбор СУБД:** Если БД нужна, есть ли предпочтения по типу СУБД (SQL vs NoSQL) с учетом потенциальной структуры метаданных?

## Деплой и Мониторинг
1.  **Требования к окружению:** Есть ли специфические требования к серверному окружению для деплоя (например, конкретная версия Node.js, наличие определенных системных библиотек для Sharp)?
2.  **Ключевые метрики для мониторинга:** Какие параметры работы приложения важно отслеживать в первую очередь (например, среднее время оптимизации, количество ошибок, загрузка CPU/памяти сервера)?

---
*Этот список будет обновляться по мере появления новых вопросов в процессе проектирования и разработки.* 